Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.gitDiff = exports.gitPull = exports.checkoutCommit = exports.gitToJs = undefined;

var _util = require('./util');

var _checkout_commit = require('./checkout_commit');

var _checkout_commit2 = _interopRequireDefault(_checkout_commit);

var _git_pull = require('./git_pull');

var _git_pull2 = _interopRequireDefault(_git_pull);

var _git_diff = require('./git_diff');

var _git_diff2 = _interopRequireDefault(_git_diff);

var _parse_git_log = require('./parse_git_log');

var _parse_git_log2 = _interopRequireDefault(_parse_git_log);

var _git_log_stream = require('./git_log_stream');

var _git_log_stream2 = _interopRequireDefault(_git_log_stream);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var gitToJs = function gitToJs(repoPath) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var resolvedPath = (0, _util.resolveHome)(repoPath);

  try {
    (0, _util.validatePath)(resolvedPath);
  } catch (e) {
    return Promise.reject(e);
  }

  var _gitLogStream = (0, _git_log_stream2.default)(resolvedPath, options),
      stream = _gitLogStream.stream,
      addErrorHandler = _gitLogStream.addErrorHandler;

  return new Promise(function (resolve, reject) {
    addErrorHandler(reject);

    (0, _parse_git_log2.default)(stream).then(resolve);
  });
};
// babel-polyfill is needed for async/await
exports.gitToJs = gitToJs;
exports.checkoutCommit = _checkout_commit2.default;
exports.gitPull = _git_pull2.default;
exports.gitDiff = _git_diff2.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnaXRUb0pzIiwicmVwb1BhdGgiLCJvcHRpb25zIiwicmVzb2x2ZWRQYXRoIiwiZSIsIlByb21pc2UiLCJyZWplY3QiLCJzdHJlYW0iLCJhZGRFcnJvckhhbmRsZXIiLCJyZXNvbHZlIiwidGhlbiIsImNoZWNrb3V0Q29tbWl0IiwiZ2l0UHVsbCIsImdpdERpZmYiXSwibWFwcGluZ3MiOiI7Ozs7O0FBR0E7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBTUEsSUFBTUEsVUFBVSxTQUFWQSxPQUFVLENBQ2RDLFFBRGMsRUFHVztBQUFBLE1BRHpCQyxPQUN5Qix1RUFERSxFQUNGOztBQUN6QixNQUFNQyxlQUFlLHVCQUFZRixRQUFaLENBQXJCOztBQUVBLE1BQUk7QUFDRiw0QkFBYUUsWUFBYjtBQUNELEdBRkQsQ0FFRSxPQUFPQyxDQUFQLEVBQVU7QUFDVixXQUFPQyxRQUFRQyxNQUFSLENBQWVGLENBQWYsQ0FBUDtBQUNEOztBQVB3QixzQkFTUyw4QkFBYUQsWUFBYixFQUEyQkQsT0FBM0IsQ0FUVDtBQUFBLE1BU2xCSyxNQVRrQixpQkFTbEJBLE1BVGtCO0FBQUEsTUFTVkMsZUFUVSxpQkFTVkEsZUFUVTs7QUFXekIsU0FBTyxJQUFJSCxPQUFKLENBQVksVUFBQ0ksT0FBRCxFQUFVSCxNQUFWLEVBQXFCO0FBQ3RDRSxvQkFBZ0JGLE1BQWhCOztBQUVBLGlDQUFZQyxNQUFaLEVBQW9CRyxJQUFwQixDQUF5QkQsT0FBekI7QUFDRCxHQUpNLENBQVA7QUFLRCxDQW5CRDtBQWJBO1FBa0NRVCxPLEdBQUFBLE87UUFBU1csYztRQUFnQkMsTztRQUFTQyxPIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbi8vIGJhYmVsLXBvbHlmaWxsIGlzIG5lZWRlZCBmb3IgYXN5bmMvYXdhaXRcbmltcG9ydCB0eXBlIHtHaXRDb21taXQsIEZpbGVNb2RpZmljYXRpb259IGZyb20gJy4vdHlwZXMvZ2l0X2NvbW1pdF90eXBlJztcbmltcG9ydCB7dmFsaWRhdGVQYXRoLCByZXNvbHZlSG9tZX0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBjaGVja291dENvbW1pdCBmcm9tICcuL2NoZWNrb3V0X2NvbW1pdCc7XG5pbXBvcnQgZ2l0UHVsbCBmcm9tICcuL2dpdF9wdWxsJztcbmltcG9ydCBnaXREaWZmIGZyb20gJy4vZ2l0X2RpZmYnO1xuaW1wb3J0IHBhcnNlR2l0TG9nIGZyb20gJy4vcGFyc2VfZ2l0X2xvZyc7XG5pbXBvcnQgZ2l0TG9nU3RyZWFtIGZyb20gJy4vZ2l0X2xvZ19zdHJlYW0nO1xuXG50eXBlIGdpdFRvSnNPcHRpb25zID0ge1xuICBzaW5jZUNvbW1pdD86IHN0cmluZ1xufTtcblxuY29uc3QgZ2l0VG9KcyA9IChcbiAgcmVwb1BhdGg6IHN0cmluZyxcbiAgb3B0aW9ucz86IGdpdFRvSnNPcHRpb25zID0ge31cbik6IFByb21pc2U8R2l0Q29tbWl0W10+ID0+IHtcbiAgY29uc3QgcmVzb2x2ZWRQYXRoID0gcmVzb2x2ZUhvbWUocmVwb1BhdGgpO1xuXG4gIHRyeSB7XG4gICAgdmFsaWRhdGVQYXRoKHJlc29sdmVkUGF0aCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gIH1cblxuICBjb25zdCB7c3RyZWFtLCBhZGRFcnJvckhhbmRsZXJ9ID0gZ2l0TG9nU3RyZWFtKHJlc29sdmVkUGF0aCwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBhZGRFcnJvckhhbmRsZXIocmVqZWN0KTtcblxuICAgIHBhcnNlR2l0TG9nKHN0cmVhbSkudGhlbihyZXNvbHZlKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge2dpdFRvSnMsIGNoZWNrb3V0Q29tbWl0LCBnaXRQdWxsLCBnaXREaWZmfTtcbmV4cG9ydCB0eXBlIHtHaXRDb21taXQsIEZpbGVNb2RpZmljYXRpb259O1xuIl19
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validatePath = exports.resolveHome = undefined;

var _fs = require('fs');

var _path = require('path');

var resolveHome = exports.resolveHome = function resolveHome(filepath) {
  if (filepath[0] === '~') {
    var restOfPath = filepath.slice(1);
    if (!process.env.HOME) throw new Error('HOME environment variable is missing');
    var home = process.env.HOME;
    return (0, _path.join)(home, restOfPath);
  }
  return filepath;
};

var validatePath = exports.validatePath = function validatePath(resolvedPath) {
  if (!(0, _fs.existsSync)(resolvedPath)) {
    throw new Error('The path ' + resolvedPath + ' was not found');
  }

  if (!(0, _fs.existsSync)((0, _path.join)(resolvedPath, '.git'))) {
    throw new Error('The directory ' + resolvedPath + ' does not appear to be the root of a git repository.');
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsLmpzIl0sIm5hbWVzIjpbInJlc29sdmVIb21lIiwiZmlsZXBhdGgiLCJyZXN0T2ZQYXRoIiwic2xpY2UiLCJwcm9jZXNzIiwiZW52IiwiSE9NRSIsIkVycm9yIiwiaG9tZSIsInZhbGlkYXRlUGF0aCIsInJlc29sdmVkUGF0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7QUFDQTs7QUFFTyxJQUFNQSxvQ0FBYyxTQUFkQSxXQUFjLFdBQVk7QUFDckMsTUFBSUMsU0FBUyxDQUFULE1BQWdCLEdBQXBCLEVBQXlCO0FBQ3ZCLFFBQU1DLGFBQXFCRCxTQUFTRSxLQUFULENBQWUsQ0FBZixDQUEzQjtBQUNBLFFBQUksQ0FBQ0MsUUFBUUMsR0FBUixDQUFZQyxJQUFqQixFQUNFLE1BQU0sSUFBSUMsS0FBSixDQUFVLHNDQUFWLENBQU47QUFDRixRQUFNQyxPQUFnQkosUUFBUUMsR0FBUixDQUFZQyxJQUFsQztBQUNBLFdBQU8sZ0JBQUtFLElBQUwsRUFBV04sVUFBWCxDQUFQO0FBQ0Q7QUFDRCxTQUFPRCxRQUFQO0FBQ0QsQ0FUTTs7QUFXQSxJQUFNUSxzQ0FBZSxTQUFmQSxZQUFlLGVBQWdCO0FBQzFDLE1BQUksQ0FBQyxvQkFBV0MsWUFBWCxDQUFMLEVBQStCO0FBQzdCLFVBQU0sSUFBSUgsS0FBSixlQUFzQkcsWUFBdEIsb0JBQU47QUFDRDs7QUFFRCxNQUFJLENBQUMsb0JBQVcsZ0JBQUtBLFlBQUwsRUFBbUIsTUFBbkIsQ0FBWCxDQUFMLEVBQTZDO0FBQzNDLFVBQU0sSUFBSUgsS0FBSixvQkFDYUcsWUFEYiwwREFBTjtBQUdEO0FBQ0YsQ0FWTSIsImZpbGUiOiJ1dGlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtleGlzdHNTeW5jfSBmcm9tICdmcyc7XG5pbXBvcnQge2pvaW59IGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgcmVzb2x2ZUhvbWUgPSBmaWxlcGF0aCA9PiB7XG4gIGlmIChmaWxlcGF0aFswXSA9PT0gJ34nKSB7XG4gICAgY29uc3QgcmVzdE9mUGF0aDogc3RyaW5nID0gZmlsZXBhdGguc2xpY2UoMSk7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5IT01FKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdIT01FIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1pc3NpbmcnKTtcbiAgICBjb25zdCBob21lOiBzdHJpbmcgPSAocHJvY2Vzcy5lbnYuSE9NRTogc3RyaW5nKTtcbiAgICByZXR1cm4gam9pbihob21lLCByZXN0T2ZQYXRoKTtcbiAgfVxuICByZXR1cm4gZmlsZXBhdGg7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVQYXRoID0gcmVzb2x2ZWRQYXRoID0+IHtcbiAgaWYgKCFleGlzdHNTeW5jKHJlc29sdmVkUGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwYXRoICR7cmVzb2x2ZWRQYXRofSB3YXMgbm90IGZvdW5kYCk7XG4gIH1cblxuICBpZiAoIWV4aXN0c1N5bmMoam9pbihyZXNvbHZlZFBhdGgsICcuZ2l0JykpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBkaXJlY3RvcnkgJHtyZXNvbHZlZFBhdGh9IGRvZXMgbm90IGFwcGVhciB0byBiZSB0aGUgcm9vdCBvZiBhIGdpdCByZXBvc2l0b3J5LmBcbiAgICApO1xuICB9XG59O1xuIl19
Object.defineProperty(exports, "__esModule", {
  value: true
});

var _util = require('util.promisify');

var _util2 = _interopRequireDefault(_util);

var _child_process = require('child_process');

var _child_process2 = _interopRequireDefault(_child_process);

var _util3 = require('./util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var exec = (0, _util2.default)(_child_process2.default.exec);

/**
 * Checks out a commit given its repo and hash.
 *
 * Returns void. Throws error on failure.
 */
var checkoutCommit = function checkoutCommit(pathToRepo, hash) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : { force: false };

  var resolvedPath = (0, _util3.resolveHome)(pathToRepo);

  try {
    (0, _util3.validatePath)(resolvedPath);
  } catch (e) {
    return Promise.reject(e);
  }

  return exec('git checkout ' + hash + ' ' + (options.force ? '--force' : ''), {
    cwd: resolvedPath
  });
};

exports.default = checkoutCommit;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jaGVja291dF9jb21taXQuanMiXSwibmFtZXMiOlsiZXhlYyIsImNoZWNrb3V0Q29tbWl0IiwicGF0aFRvUmVwbyIsImhhc2giLCJvcHRpb25zIiwiZm9yY2UiLCJyZXNvbHZlZFBhdGgiLCJlIiwiUHJvbWlzZSIsInJlamVjdCIsImN3ZCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBLElBQU1BLE9BQU8sb0JBQVUsd0JBQWFBLElBQXZCLENBQWI7O0FBRUE7Ozs7O0FBS0EsSUFBTUMsaUJBQWlCLFNBQWpCQSxjQUFpQixDQUFDQyxVQUFELEVBQWFDLElBQWIsRUFBZ0Q7QUFBQSxNQUE3QkMsT0FBNkIsdUVBQW5CLEVBQUNDLE9BQU8sS0FBUixFQUFtQjs7QUFDckUsTUFBTUMsZUFBZSx3QkFBWUosVUFBWixDQUFyQjs7QUFFQSxNQUFJO0FBQ0YsNkJBQWFJLFlBQWI7QUFDRCxHQUZELENBRUUsT0FBT0MsQ0FBUCxFQUFVO0FBQ1YsV0FBT0MsUUFBUUMsTUFBUixDQUFlRixDQUFmLENBQVA7QUFDRDs7QUFFRCxTQUFPUCx1QkFBcUJHLElBQXJCLFVBQTZCQyxRQUFRQyxLQUFSLEdBQWdCLFNBQWhCLEdBQTRCLEVBQXpELEdBQStEO0FBQ3BFSyxTQUFLSjtBQUQrRCxHQUEvRCxDQUFQO0FBR0QsQ0FaRDs7a0JBY2VMLGMiLCJmaWxlIjoiY2hlY2tvdXRfY29tbWl0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByb21pc2lmeSBmcm9tICd1dGlsLnByb21pc2lmeSc7XG5pbXBvcnQgY2hpbGRQcm9jZXNzIGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHt2YWxpZGF0ZVBhdGgsIHJlc29sdmVIb21lfSBmcm9tICcuL3V0aWwnO1xuXG5jb25zdCBleGVjID0gcHJvbWlzaWZ5KGNoaWxkUHJvY2Vzcy5leGVjKTtcblxuLyoqXG4gKiBDaGVja3Mgb3V0IGEgY29tbWl0IGdpdmVuIGl0cyByZXBvIGFuZCBoYXNoLlxuICpcbiAqIFJldHVybnMgdm9pZC4gVGhyb3dzIGVycm9yIG9uIGZhaWx1cmUuXG4gKi9cbmNvbnN0IGNoZWNrb3V0Q29tbWl0ID0gKHBhdGhUb1JlcG8sIGhhc2gsIG9wdGlvbnMgPSB7Zm9yY2U6IGZhbHNlfSkgPT4ge1xuICBjb25zdCByZXNvbHZlZFBhdGggPSByZXNvbHZlSG9tZShwYXRoVG9SZXBvKTtcblxuICB0cnkge1xuICAgIHZhbGlkYXRlUGF0aChyZXNvbHZlZFBhdGgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICB9XG5cbiAgcmV0dXJuIGV4ZWMoYGdpdCBjaGVja291dCAke2hhc2h9ICR7b3B0aW9ucy5mb3JjZSA/ICctLWZvcmNlJyA6ICcnfWAsIHtcbiAgICBjd2Q6IHJlc29sdmVkUGF0aFxuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNoZWNrb3V0Q29tbWl0O1xuIl19